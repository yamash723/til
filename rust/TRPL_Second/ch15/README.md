スマートポインタの話
===================

> スマートポインタ

※C++とかの話。Rustのようにスコープ外れたりしたら自動で開放？違いは？要勉強

Rustにおけるスマートポインタは三種類

* `Box<T>`
  * ヒープに値を割り当てる
* `Rc<T>`
  * 複数の所有権を許可する
* `Ref<T>` / `RefMut<T>`
  * `RefCell<T>`を使ってアクセス。詳細は後で

`Box<T>`
----------------------

* `let b = Box::new(5)` で任意の値を使用することができる
  * この時newに渡された値はヒープに保存される
  * そのヒープにある値のポインタを値として持ったBoxがスタックに格納される
  * スコープが外れた時はスタックのBox、ヒープの値両方が解放される
  * とはいえ`i32`はそもそもプリミティブでスタック行くので意味はない
* Rustはコンパイル時に型のサイズを知っていなければならない
  * ただ再起型のような無限に続く可能性のあるものはサイズがわからない
  * そういうものは`Box<T>`で包んであげるとよい(Box自体はサイズがわかっている)
* What is `Cons`?
  * 要調査